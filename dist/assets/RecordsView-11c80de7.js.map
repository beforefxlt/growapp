{"version":3,"file":"RecordsView-11c80de7.js","sources":["../../src/views/RecordsView.vue"],"sourcesContent":["<template>\n  <div class=\"records-container\">\n    <el-empty v-if=\"!hasChildren\" description=\"请先添加儿童信息\">\n      <el-button type=\"primary\" @click=\"router.push('/settings')\">去添加</el-button>\n    </el-empty>\n\n    <template v-else>\n      <div class=\"records-header\">\n        <h2>生长记录</h2>\n        <el-button type=\"primary\" @click=\"showAddDialog = true\">\n          <el-icon><Plus /></el-icon>添加记录\n        </el-button>\n      </div>\n\n      <el-table :data=\"sortedRecords\" style=\"width: 100%\">\n        <el-table-column prop=\"date\" label=\"日期\" width=\"180\" />\n        <el-table-column prop=\"height\" label=\"身高(cm)\" width=\"120\" />\n        <el-table-column prop=\"weight\" label=\"体重(kg)\" width=\"120\" />\n        <el-table-column label=\"操作\">\n          <template #default=\"{ row }\">\n            <el-button-group>\n              <el-button type=\"primary\" link @click=\"editRecord(row)\">\n                <el-icon><Edit /></el-icon>\n              </el-button>\n              <el-button type=\"danger\" link @click=\"deleteRecord(row)\">\n                <el-icon><Delete /></el-icon>\n              </el-button>\n            </el-button-group>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <el-dialog\n        v-model=\"showAddDialog\"\n        :title=\"isEditing ? '编辑记录' : '添加记录'\"\n        width=\"500px\"\n      >\n        <el-form :model=\"form\" label-width=\"100px\">\n          <el-form-item label=\"日期\">\n            <el-date-picker\n              v-model=\"form.date\"\n              type=\"date\"\n              placeholder=\"选择日期\"\n              style=\"width: 100%\"\n            />\n          </el-form-item>\n          <el-form-item label=\"身高(cm)\">\n            <el-input-number\n              v-model=\"form.height\"\n              :min=\"0\"\n              :max=\"200\"\n              :precision=\"1\"\n              style=\"width: 100%\"\n            />\n          </el-form-item>\n          <el-form-item label=\"体重(kg)\">\n            <el-input-number\n              v-model=\"form.weight\"\n              :min=\"0\"\n              :max=\"100\"\n              :precision=\"2\"\n              style=\"width: 100%\"\n            />\n          </el-form-item>\n        </el-form>\n        <template #footer>\n          <el-button @click=\"showAddDialog = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"saveRecord\">保存</el-button>\n        </template>\n      </el-dialog>\n    </template>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useChildrenStore } from '../stores/children'\nimport { useRecordsStore } from '../stores/records'\nimport { Plus, Edit, Delete } from '@element-plus/icons-vue'\nimport { ElMessageBox } from 'element-plus'\n\nconst router = useRouter()\nconst childrenStore = useChildrenStore()\nconst recordsStore = useRecordsStore()\n\nconst hasChildren = computed(() => childrenStore.hasChildren)\nconst currentChild = computed(() => childrenStore.currentChild)\n\nconst showAddDialog = ref(false)\nconst isEditing = ref(false)\nconst editingRecordId = ref(null)\n\nconst form = ref({\n  date: '',\n  height: 0,\n  weight: 0\n})\n\nconst sortedRecords = computed(() => {\n  if (!currentChild.value) return []\n  return [...recordsStore.getChildRecords(currentChild.value.id)]\n    .sort((a, b) => new Date(b.date) - new Date(a.date))\n})\n\nconst resetForm = () => {\n  form.value = {\n    date: new Date(),\n    height: 0,\n    weight: 0\n  }\n  isEditing.value = false\n  editingRecordId.value = null\n}\n\nconst editRecord = (record) => {\n  form.value = { ...record }\n  isEditing.value = true\n  editingRecordId.value = record.id\n  showAddDialog.value = true\n}\n\nconst deleteRecord = (record) => {\n  ElMessageBox.confirm('确定要删除这条记录吗？', '提示', {\n    type: 'warning'\n  }).then(() => {\n    recordsStore.deleteRecord(currentChild.value.id, record.id)\n  })\n}\n\nconst saveRecord = () => {\n  if (isEditing.value) {\n    recordsStore.updateRecord(currentChild.value.id, editingRecordId.value, form.value)\n  } else {\n    recordsStore.addRecord(currentChild.value.id, form.value)\n  }\n  showAddDialog.value = false\n  resetForm()\n}\n</script>\n\n<style scoped>\n.records-container {\n  padding: 20px;\n}\n\n.records-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.records-header h2 {\n  margin: 0;\n}\n</style>"],"names":["router","useRouter","childrenStore","useChildrenStore","recordsStore","useRecordsStore","hasChildren","computed","currentChild","showAddDialog","ref","isEditing","editingRecordId","form","sortedRecords","a","b","resetForm","editRecord","record","deleteRecord","ElMessageBox","saveRecord"],"mappings":"kUAkFA,MAAMA,EAASC,EAAU,EACnBC,EAAgBC,EAAiB,EACjCC,EAAeC,EAAgB,EAE/BC,EAAcC,EAAS,IAAML,EAAc,WAAW,EACtDM,EAAeD,EAAS,IAAML,EAAc,YAAY,EAExDO,EAAgBC,EAAI,EAAK,EACzBC,EAAYD,EAAI,EAAK,EACrBE,EAAkBF,EAAI,IAAI,EAE1BG,EAAOH,EAAI,CACf,KAAM,GACN,OAAQ,EACR,OAAQ,CACV,CAAC,EAEKI,EAAgBP,EAAS,IACxBC,EAAa,MACX,CAAC,GAAGJ,EAAa,gBAAgBI,EAAa,MAAM,EAAE,CAAC,EAC3D,KAAK,CAACO,EAAGC,IAAM,IAAI,KAAKA,EAAE,IAAI,EAAI,IAAI,KAAKD,EAAE,IAAI,CAAC,EAFrB,CAAC,CAGlC,EAEKE,EAAY,IAAM,CACtBJ,EAAK,MAAQ,CACX,KAAM,IAAI,KACV,OAAQ,EACR,OAAQ,CACV,EACAF,EAAU,MAAQ,GAClBC,EAAgB,MAAQ,IAC1B,EAEMM,EAAcC,GAAW,CAC7BN,EAAK,MAAQ,CAAE,GAAGM,CAAO,EACzBR,EAAU,MAAQ,GAClBC,EAAgB,MAAQO,EAAO,GAC/BV,EAAc,MAAQ,EACxB,EAEMW,EAAgBD,GAAW,CAC/BE,EAAa,QAAQ,cAAe,KAAM,CACxC,KAAM,SACV,CAAG,EAAE,KAAK,IAAM,CACZjB,EAAa,aAAaI,EAAa,MAAM,GAAIW,EAAO,EAAE,CAC9D,CAAG,CACH,EAEMG,EAAa,IAAM,CACnBX,EAAU,MACZP,EAAa,aAAaI,EAAa,MAAM,GAAII,EAAgB,MAAOC,EAAK,KAAK,EAElFT,EAAa,UAAUI,EAAa,MAAM,GAAIK,EAAK,KAAK,EAE1DJ,EAAc,MAAQ,GACtBQ,EAAU,CACZ"}
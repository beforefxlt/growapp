import{u as T,c as y,r as m,a as n,b as h,d as V,e as q,f as l,F as z,g as C,h as t,j as c,i as f,p as G,k as H,l as J,E as K}from"./index-2eae4f95.js";import{_ as L,u as O,a as P}from"./_plugin-vue_export-helper-28b54625.js";const Q={class:"records-container"},W={class:"records-header"},X={__name:"RecordsView",setup(Y){const R=T(),k=O(),i=P(),x=y(()=>k.hasChildren),r=y(()=>k.currentChild),u=m(!1),p=m(!1),v=m(null),a=m({date:"",height:0,weight:0}),B=y(()=>r.value?[...i.getChildRecords(r.value.id)].sort((d,e)=>new Date(e.date)-new Date(d.date)):[]),$=()=>{a.value={date:new Date,height:0,weight:0},p.value=!1,v.value=null},D=d=>{a.value={...d},p.value=!0,v.value=d.id,u.value=!0},E=d=>{K.confirm("确定要删除这条记录吗？","提示",{type:"warning"}).then(()=>{i.deleteRecord(r.value.id,d.id)})},S=()=>{p.value?i.updateRecord(r.value.id,v.value,a.value):i.addRecord(r.value.id,a.value),u.value=!1,$()};return(d,e)=>{const s=n("el-button"),U=n("el-empty"),g=n("el-icon"),_=n("el-table-column"),F=n("el-button-group"),N=n("el-table"),I=n("el-date-picker"),w=n("el-form-item"),b=n("el-input-number"),j=n("el-form"),A=n("el-dialog");return h(),V("div",Q,[x.value?(h(),V(z,{key:1},[C("div",W,[e[9]||(e[9]=C("h2",null,"生长记录",-1)),t(s,{type:"primary",onClick:e[1]||(e[1]=o=>u.value=!0)},{default:l(()=>[t(g,null,{default:l(()=>[t(f(G))]),_:1}),e[8]||(e[8]=c("添加记录 "))]),_:1})]),t(N,{data:B.value,style:{width:"100%"}},{default:l(()=>[t(_,{prop:"date",label:"日期",width:"180"}),t(_,{prop:"height",label:"身高(cm)",width:"120"}),t(_,{prop:"weight",label:"体重(kg)",width:"120"}),t(_,{label:"操作"},{default:l(({row:o})=>[t(F,null,{default:l(()=>[t(s,{type:"primary",link:"",onClick:M=>D(o)},{default:l(()=>[t(g,null,{default:l(()=>[t(f(H))]),_:1})]),_:2},1032,["onClick"]),t(s,{type:"danger",link:"",onClick:M=>E(o)},{default:l(()=>[t(g,null,{default:l(()=>[t(f(J))]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"]),t(A,{modelValue:u.value,"onUpdate:modelValue":e[6]||(e[6]=o=>u.value=o),title:p.value?"编辑记录":"添加记录",width:"500px"},{footer:l(()=>[t(s,{onClick:e[5]||(e[5]=o=>u.value=!1)},{default:l(()=>e[10]||(e[10]=[c("取消")])),_:1}),t(s,{type:"primary",onClick:S},{default:l(()=>e[11]||(e[11]=[c("保存")])),_:1})]),default:l(()=>[t(j,{model:a.value,"label-width":"100px"},{default:l(()=>[t(w,{label:"日期"},{default:l(()=>[t(I,{modelValue:a.value.date,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.date=o),type:"date",placeholder:"选择日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(w,{label:"身高(cm)"},{default:l(()=>[t(b,{modelValue:a.value.height,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.height=o),min:0,max:200,precision:1,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(w,{label:"体重(kg)"},{default:l(()=>[t(b,{modelValue:a.value.weight,"onUpdate:modelValue":e[4]||(e[4]=o=>a.value.weight=o),min:0,max:100,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])],64)):(h(),q(U,{key:0,description:"请先添加儿童信息"},{default:l(()=>[t(s,{type:"primary",onClick:e[0]||(e[0]=o=>f(R).push("/settings"))},{default:l(()=>e[7]||(e[7]=[c("去添加")])),_:1})]),_:1}))])}}},te=L(X,[["__scopeId","data-v-7d072023"]]);export{te as default};
//# sourceMappingURL=RecordsView-11c80de7.js.map

{"version":3,"file":"SettingsView-8ec80a2b.js","sources":["../../src/views/SettingsView.vue"],"sourcesContent":["<template>\n  <div class=\"settings-container\">\n    <div class=\"settings-header\">\n      <h2>儿童信息管理</h2>\n      <el-button type=\"primary\" @click=\"showAddDialog = true\">\n        <el-icon><Plus /></el-icon>添加儿童\n      </el-button>\n    </div>\n\n    <el-empty v-if=\"!hasChildren\" description=\"暂无儿童信息\" />\n\n    <el-card v-else v-for=\"child in children\" :key=\"child.id\" class=\"child-card\">\n      <template #header>\n        <div class=\"card-header\">\n          <span>{{ child.name }}</span>\n          <el-button-group>\n            <el-button \n              type=\"primary\" \n              :plain=\"child.id !== currentChildId\"\n              @click=\"setCurrentChild(child.id)\"\n            >\n              {{ child.id === currentChildId ? '当前选中' : '选择' }}\n            </el-button>\n            <el-button type=\"primary\" link @click=\"editChild(child)\">\n              <el-icon><Edit /></el-icon>\n            </el-button>\n            <el-button type=\"danger\" link @click=\"deleteChild(child)\">\n              <el-icon><Delete /></el-icon>\n            </el-button>\n          </el-button-group>\n        </div>\n      </template>\n      <el-descriptions :column=\"1\">\n        <el-descriptions-item label=\"性别\">\n          {{ child.gender === 'male' ? '男' : '女' }}\n        </el-descriptions-item>\n        <el-descriptions-item label=\"出生日期\">\n          {{ child.birthDate }}\n        </el-descriptions-item>\n      </el-descriptions>\n    </el-card>\n\n    <el-dialog\n      v-model=\"showAddDialog\"\n      :title=\"isEditing ? '编辑儿童信息' : '添加儿童'\"\n      width=\"500px\"\n    >\n      <el-form :model=\"form\" label-width=\"100px\">\n        <el-form-item label=\"姓名\">\n          <el-input v-model=\"form.name\" placeholder=\"请输入姓名\" />\n        </el-form-item>\n        <el-form-item label=\"性别\">\n          <el-radio-group v-model=\"form.gender\">\n            <el-radio label=\"male\">男</el-radio>\n            <el-radio label=\"female\">女</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"出生日期\">\n          <el-date-picker\n            v-model=\"form.birthDate\"\n            type=\"date\"\n            placeholder=\"选择出生日期\"\n            style=\"width: 100%\"\n          />\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <el-button @click=\"showAddDialog = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"saveChild\">保存</el-button>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport { useChildrenStore } from '../stores/children'\nimport { useRecordsStore } from '../stores/records'\nimport { Plus, Edit, Delete } from '@element-plus/icons-vue'\nimport { ElMessageBox } from 'element-plus'\n\nconst childrenStore = useChildrenStore()\nconst recordsStore = useRecordsStore()\n\nconst children = computed(() => childrenStore.children)\nconst hasChildren = computed(() => childrenStore.hasChildren)\nconst currentChildId = computed(() => childrenStore.currentChildId)\n\nconst showAddDialog = ref(false)\nconst isEditing = ref(false)\nconst editingChildId = ref(null)\n\nconst form = ref({\n  name: '',\n  gender: 'male',\n  birthDate: ''\n})\n\nconst resetForm = () => {\n  form.value = {\n    name: '',\n    gender: 'male',\n    birthDate: ''\n  }\n  isEditing.value = false\n  editingChildId.value = null\n}\n\nconst editChild = (child) => {\n  form.value = { ...child }\n  isEditing.value = true\n  editingChildId.value = child.id\n  showAddDialog.value = true\n}\n\nconst deleteChild = (child) => {\n  ElMessageBox.confirm(\n    '删除儿童信息将同时删除所有相关的生长记录，是否继续？',\n    '警告',\n    {\n      type: 'warning'\n    }\n  ).then(() => {\n    childrenStore.deleteChild(child.id)\n    recordsStore.deleteChildRecords(child.id)\n  })\n}\n\nconst setCurrentChild = (id) => {\n  childrenStore.setCurrentChild(id)\n}\n\nconst saveChild = () => {\n  if (isEditing.value) {\n    childrenStore.updateChild(editingChildId.value, form.value)\n  } else {\n    childrenStore.addChild(form.value)\n  }\n  showAddDialog.value = false\n  resetForm()\n}\n</script>\n\n<style scoped>\n.settings-container {\n  padding: 20px;\n}\n\n.settings-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.settings-header h2 {\n  margin: 0;\n}\n\n.child-card {\n  margin-bottom: 20px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n</style>"],"names":["childrenStore","useChildrenStore","recordsStore","useRecordsStore","children","computed","hasChildren","currentChildId","showAddDialog","ref","isEditing","editingChildId","form","resetForm","editChild","child","deleteChild","ElMessageBox","setCurrentChild","id","saveChild"],"mappings":"wWAiFA,MAAMA,EAAgBC,EAAiB,EACjCC,EAAeC,EAAgB,EAE/BC,EAAWC,EAAS,IAAML,EAAc,QAAQ,EAChDM,EAAcD,EAAS,IAAML,EAAc,WAAW,EACtDO,EAAiBF,EAAS,IAAML,EAAc,cAAc,EAE5DQ,EAAgBC,EAAI,EAAK,EACzBC,EAAYD,EAAI,EAAK,EACrBE,EAAiBF,EAAI,IAAI,EAEzBG,EAAOH,EAAI,CACf,KAAM,GACN,OAAQ,OACR,UAAW,EACb,CAAC,EAEKI,EAAY,IAAM,CACtBD,EAAK,MAAQ,CACX,KAAM,GACN,OAAQ,OACR,UAAW,EACb,EACAF,EAAU,MAAQ,GAClBC,EAAe,MAAQ,IACzB,EAEMG,EAAaC,GAAU,CAC3BH,EAAK,MAAQ,CAAE,GAAGG,CAAM,EACxBL,EAAU,MAAQ,GAClBC,EAAe,MAAQI,EAAM,GAC7BP,EAAc,MAAQ,EACxB,EAEMQ,EAAeD,GAAU,CAC7BE,EAAa,QACX,6BACA,KACA,CACE,KAAM,SACR,CACD,EAAC,KAAK,IAAM,CACXjB,EAAc,YAAYe,EAAM,EAAE,EAClCb,EAAa,mBAAmBa,EAAM,EAAE,CAC5C,CAAG,CACH,EAEMG,EAAmBC,GAAO,CAC9BnB,EAAc,gBAAgBmB,CAAE,CAClC,EAEMC,EAAY,IAAM,CAClBV,EAAU,MACZV,EAAc,YAAYW,EAAe,MAAOC,EAAK,KAAK,EAE1DZ,EAAc,SAASY,EAAK,KAAK,EAEnCJ,EAAc,MAAQ,GACtBK,EAAU,CACZ"}